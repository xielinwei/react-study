---
description: 
globs: *.js,*.ts,*.jsx,*.tsx,*.vue
alwaysApply: false
---
# ä»£ç æ³¨é‡Šå¯†åº¦è§„åˆ™

## ğŸ¯ æ³¨é‡Šæ ‡å‡†

### ğŸ“Š æ ¸å¿ƒè¦æ±‚
- **æ³¨é‡Šå¯†åº¦ï¼š> 10%**
- **è®¡ç®—æ–¹å¼ï¼šæ³¨é‡Šè¡Œæ•° / é€»è¾‘è¡Œæ•°**
- **é€‚ç”¨æ–‡ä»¶ï¼šjs/jsx/ts/tsx/vue**
- **Vueæ–‡ä»¶è¯´æ˜ï¼šé€»è¾‘è¡Œæ•° = template + script çš„é€»è¾‘è¡Œæ•°ä¹‹å’Œ**

### ğŸ¯ è´¨é‡ç›®æ ‡
- ä¿è¯ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
- æå‡å›¢é˜Ÿåä½œæ•ˆç‡
- é™ä½ä»£ç ç†è§£æˆæœ¬

## ğŸ“ æ³¨é‡Šè§„èŒƒ

### âœ… æ ¸å¿ƒè§„èŒƒ

1. **å¤æ‚ä¸šåŠ¡é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Šè¯´æ˜**
   - ä¸šåŠ¡è§„åˆ™ã€ç®—æ³•é€»è¾‘ã€ç‰¹æ®Šå¤„ç†å¿…é¡»æ³¨é‡Š
   - è¯´æ˜ä¸šåŠ¡èƒŒæ™¯å’Œå¤„ç†åŸå› 

2. **å‡½æ•°/æ–¹æ³•æ·»åŠ  JSDoc æ³¨é‡Š**
   - æ‰€æœ‰å…¬å…±å‡½æ•°å¿…é¡»æœ‰å®Œæ•´çš„JSDocæ–‡æ¡£
   - åŒ…å«å‚æ•°ã€è¿”å›å€¼ã€åŠŸèƒ½æè¿°

3. **æ³¨é‡Šåº”è¯´æ˜"ä¸ºä»€ä¹ˆè¿™ä¹ˆåš"ï¼Œè€Œé"åšäº†ä»€ä¹ˆ"**
   - é‡ç‚¹è§£é‡Šè®¾è®¡æ€è·¯ã€ä¸šåŠ¡åŸå› ã€æŠ€æœ¯é€‰å‹
   - é¿å…ç®€å•é‡å¤ä»£ç é€»è¾‘

4. **é¿å…æ˜¾è€Œæ˜“è§çš„æ— æ„ä¹‰æ³¨é‡Š**
   - ä¸è¦ä¸ºç®€å•çš„èµ‹å€¼ã€è°ƒç”¨æ·»åŠ æ³¨é‡Š
   - å˜é‡åå·²ç»æ¸…æ™°è¡¨è¾¾å«ä¹‰çš„ä¸éœ€è¦é¢å¤–æ³¨é‡Š

## ğŸ” æ³¨é‡Šç¤ºä¾‹

### âœ… è‰¯å¥½æ³¨é‡Šç¤ºä¾‹

#### JavaScriptå‡½æ•°æ³¨é‡Š
```javascript
/**
 * è®¡ç®—ç”¨æˆ·ä¼šå‘˜æŠ˜æ‰£
 * ä¸šåŠ¡è§„åˆ™ï¼šVIPç”¨æˆ·åœ¨ç”Ÿæ—¥æœˆäº«å—é¢å¤–5%æŠ˜æ‰£ï¼Œä½†æ€»æŠ˜æ‰£ä¸è¶…è¿‡30%
 * @param {Object} user - ç”¨æˆ·ä¿¡æ¯
 * @param {string} user.memberLevel - ä¼šå‘˜ç­‰çº§ï¼šnormal/vip/svip
 * @param {string} user.birthday - ç”Ÿæ—¥æ—¥æœŸ YYYY-MM-DD
 * @param {number} originalPrice - åŸä»·
 * @returns {Object} æŠ˜æ‰£ä¿¡æ¯åŒ…å«æœ€ç»ˆä»·æ ¼å’ŒæŠ˜æ‰£è¯´æ˜
 */
function calculateMemberDiscount(user, originalPrice) {
  // åŸºç¡€ä¼šå‘˜æŠ˜æ‰£ï¼šVIP 8æŠ˜ï¼ŒSVIP 7æŠ˜
  let discount = user.memberLevel === 'vip' ? 0.8 : 
                 user.memberLevel === 'svip' ? 0.7 : 1.0;
  
  // ç”Ÿæ—¥æœˆç‰¹æ®Šä¼˜æƒ ï¼šé¢å¤–5%æŠ˜æ‰£ï¼ˆä¸šåŠ¡éœ€æ±‚ï¼Œæå‡ç”¨æˆ·ç²˜æ€§ï¼‰
  const currentMonth = new Date().getMonth() + 1;
  const birthMonth = new Date(user.birthday).getMonth() + 1;
  
  if (user.memberLevel !== 'normal' && currentMonth === birthMonth) {
    discount = Math.max(discount - 0.05, 0.7); // æœ€ä½7æŠ˜ä¿æŠ¤åˆ©æ¶¦
  }
  
  const finalPrice = originalPrice * discount;
  
  return {
    finalPrice,
    discountRate: (1 - discount) * 100,
    reason: currentMonth === birthMonth ? 'ä¼šå‘˜æŠ˜æ‰£+ç”Ÿæ—¥ä¼˜æƒ ' : 'ä¼šå‘˜æŠ˜æ‰£'
  };
}
```

#### Vueç»„ä»¶æ³¨é‡Š
```vue
<template>
  <!-- ç”¨æˆ·ä¸ªäººèµ„æ–™é¡µé¢ï¼šæ”¯æŒæŸ¥çœ‹å’Œç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ -->
  <div class="user-profile-page">
    <!-- é¡¶éƒ¨å¯¼èˆªæ ï¼šåŒ…å«è¿”å›å’Œä¿å­˜åŠŸèƒ½ -->
    <z-nav-bar title="ä¸ªäººèµ„æ–™" left-arrow @click-left="handleBack">
      <template #right>
        <!-- ä¿å­˜æŒ‰é’®ï¼šä»…åœ¨ä¿¡æ¯å˜æ›´æ—¶æ˜¾ç¤º -->
        <z-button v-if="hasChanges" type="text" @click="saveProfile">
          ä¿å­˜
        </z-button>
      </template>
    </z-nav-bar>

    <!-- ç”¨æˆ·ä¿¡æ¯è¡¨å•ï¼šæ”¯æŒå§“åã€é‚®ç®±ã€æ‰‹æœºç­‰åŸºæœ¬ä¿¡æ¯ç¼–è¾‘ -->
    <z-form ref="profileForm" @submit="submitProfile">
      <z-field
        v-model="userProfile.realName"
        label="çœŸå®å§“å"
        placeholder="è¯·è¾“å…¥çœŸå®å§“å"
        required
        :rules="nameRules"
      />
    </z-form>
  </div>
</template>

<script>
export default {
  name: 'UserProfilePage',
  
  data() {
    return {
      userProfile: { /* ... */ },
      originalProfile: {}, // åŸå§‹æ•°æ®ï¼šç”¨äºæ£€æµ‹æ˜¯å¦æœ‰å˜æ›´
      loading: false, // ä¿å­˜çŠ¶æ€ï¼šé˜²æ­¢é‡å¤æäº¤
    };
  },
  
  computed: {
    /**
     * æ£€æµ‹ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æœ‰å˜æ›´
     * ç”¨äºæ§åˆ¶ä¿å­˜æŒ‰é’®æ˜¾ç¤ºå’Œæç¤ºç”¨æˆ·æœªä¿å­˜çš„å˜æ›´
     */
    hasChanges() {
      return JSON.stringify(this.userProfile) !== JSON.stringify(this.originalProfile);
    }
  },
  
  methods: {
    /**
     * ä¿å­˜ç”¨æˆ·èµ„æ–™
     * éªŒè¯è¡¨å•æ•°æ®å¹¶æäº¤åˆ°æœåŠ¡å™¨ï¼ŒæˆåŠŸåæ›´æ–°æœ¬åœ°ç¼“å­˜
     */
    async saveProfile() {
      try {
        // è¡¨å•éªŒè¯ï¼šç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡®
        await this.$refs.profileForm.validate();
        
        // æäº¤æ›´æ–°ï¼šä»…æäº¤å˜æ›´çš„å­—æ®µ
        const changedFields = this.getChangedFields();
        await this.$api.updateUserProfile(changedFields);
        
        // æ›´æ–°æˆåŠŸï¼šåŒæ­¥æœ¬åœ°æ•°æ®å’Œç¼“å­˜
        this.originalProfile = JSON.parse(JSON.stringify(this.userProfile));
        this.$toast.success('ä¿å­˜æˆåŠŸ');
        
      } catch (error) {
        this.$toast.fail('ä¿å­˜å¤±è´¥ï¼š' + error.message);
      }
    }
  }
};
</script>
```

### âŒ é¿å…çš„æ³¨é‡Šåä¾‹

```javascript
// âŒ æ˜¾è€Œæ˜“è§çš„æ— æ„ä¹‰æ³¨é‡Š
let count = 0; // å£°æ˜å˜é‡count
user.name = 'John'; // è®¾ç½®ç”¨æˆ·åä¸ºJohn

// âŒ é‡å¤æè¿°ä»£ç åŠŸèƒ½ï¼Œæ²¡æœ‰è¯´æ˜åŸå› 
function getUserById(id) { // æ ¹æ®IDè·å–ç”¨æˆ·
  return api.get(`/users/${id}`); // è°ƒç”¨APIè·å–ç”¨æˆ·æ•°æ®
}

// âŒ åªè¯´åšäº†ä»€ä¹ˆï¼Œä¸è¯´ä¸ºä»€ä¹ˆ
// æ ¼å¼åŒ–ä»·æ ¼
function formatPrice(price) {
  return price.toLocaleString(); 
}
```

## âœ… ä»£ç ç”Ÿæˆè‡ªæ£€æ¸…å•

ç”Ÿæˆä»£ç æ—¶å¿…é¡»ç¡®ä¿ï¼š
- [ ] æ‰€æœ‰å…¬å…±å‡½æ•°éƒ½æœ‰å®Œæ•´çš„JSDocæ³¨é‡Š
- [ ] å¤æ‚ä¸šåŠ¡é€»è¾‘éƒ½æœ‰"ä¸ºä»€ä¹ˆ"çš„è¯´æ˜æ³¨é‡Š
- [ ] Vueæ¨¡æ¿çš„å…³é”®åŒºåŸŸéƒ½æœ‰åŠŸèƒ½è¯´æ˜æ³¨é‡Š
- [ ] é¿å…äº†æ˜¾è€Œæ˜“è§çš„æ— æ„ä¹‰æ³¨é‡Š
- [ ] æ³¨é‡Šå¯†åº¦è¾¾åˆ°10%ä»¥ä¸Š
- [ ] æ³¨é‡Šå†…å®¹ç®€æ´æ˜ç¡®
